<!doctype html>
<html lang="ko">
{% load static %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>카페인 수혈 결과물 페이지</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/jumbotron/">


    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>


</head>
<body>

<main>
    <div class="container py-4">
        <header class="pb-3 mb-4 border-bottom">
            <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" class="me-2" viewBox="0 0 118 94"
                     role="img"><title>Bootstrap</title></svg>
                <span class="fs-4">카페인 수혈</span>
            </a>
        </header>

        <div class="p-5 mb-4 bg-light rounded-3">
            <div class="container-fluid py-5">
        <span id="video">
            <h2> Lecture Name : {{ movie_title }}  </h2>
            <iframe width="100%" height="500" src={{ embed_url }} title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </span>
            </div>
        </div>

        <div class="row align-items-md-stretch">
            <div class="col-md-6">
                <div class="h-100 p-5 text-white bg-dark rounded-3">
                    <h2>강의 전문</h2>
                    <div id="loading1" style="margin-left: 0px; display: none;">
                        <h4>강의 전문 추출중...</h4>
                    </div>
                    <div id="textall" style="margin-left: 0px; display: none;">
                    </div>
                    <button id="button1" class="btn btn-outline-light" onclick="text()" type="button">1. 동영상 STT 추출
                    </button>
                    <script>
                        function text() {
                            $('#loading1').show();
                            $.ajax({
                                url: 'http://127.0.0.1:8000/caffeine/text/',
                                method: 'POST',
                            }).then(function (response) {
                                $('#loading1').hide();
                                $('#textall').show();
                                $('#textall').html(response.text_all);
                                $('#button1').hide();
                            });
                        }
                    </script>
                </div>
            </div>

            <div class="col-md-6">
                <div class="h-100 p-5 bg-light border rounded-3">
                    <h2>강의 요약</h2>
                    <div id="loading2" style="margin-left: 0px; display: none;">
                        <h4>강의 요약중...</h4>
                    </div>
                    <div id="sumall" style="margin-left: 0px; display: none;">
                    </div>
                    <button id="button2" class="btn btn-outline-secondary" onclick="summary()" type="button">2. 요약본 추출
                    </button>
                    <script>
                        function summary() {
                            $('#loading2').show();
                            $.ajax({
                                url: 'http://127.0.0.1:8000/caffeine/summary/',
                                method: 'POST',
                            }).then(function (response) {
                                $('#loading2').hide();
                                $('#sumall').show();
                                $('#sumall').html(response.sum_text);
                                $('#button2').hide();
                            });
                        }
                    </script>
                </div>
            </div>
        </div>

        <div class="row align-items-md-stretch">
            <div class="col-md-6">
                <div class="h-100 p-5 text-white bg-dark rounded-3">
                    <h2>키워드 추출</h2>
                    <div id="loading3" style="margin-left: 0px; display: none;">
                        <h4>키워드 추출중...</h4>
                    </div>
                    <div id="keyword" style="margin-left: 0px; display: none;">
                    </div>
                    <button id="button3" class="btn btn-outline-light" onclick="keytext()" type="button">3. 키워드 추출
                    </button>
                </div>
            </div>

            <div class="col-md-6">
                <div class="h-100 p-5 bg-light border rounded-3">
                    <h2>빈칸 문제</h2>
                    <div id="loading4" style="margin-left: 0px; display: none;">
                        <h4>문제 생성중...</h4>
                    </div>
                    <div id="exercise" style="margin-left: 0px; display: none;">
                    </div>
                    <button id="button4" class="btn btn-outline-secondary" onclick="showanswer()" type="button" style="display: none;">4. 정답확인</button>
                    <div id="answer" style="margin-left: 0px; display: none;"></div>
                </div>
            </div>
        </div>
        <footer class="pt-3 mt-4 text-muted border-top">
            &copy; 2022
        </footer>
    </div>
</main>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function keytext() {
        $('#loading3').show();
        $('#loading4').show();
        $.ajax({
            url: 'http://127.0.0.1:8000/caffeine/keytext/',
            method: 'POST',
        }).then(function (response) {
            $('#loading3').hide();
            $('#loading4').hide();
            $('#keyword').show();
            $('#keyword').html(response.keyword);
            $('#exercise').html(response.sentence_blank);
            $('#exercise').show();
            $('#answer').html(response.sentence);
            $('#answer').append(response.answer);
            $('#button3').hide();
            $('#button4').show();
        });
    }
</script>

<script>
    function showanswer() {
        $('#answer').show();
        $('#button4').hide();
    }
</script>
</html>
