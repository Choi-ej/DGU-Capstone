<!doctype html>
<html lang="ko">
{% load static %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>카페인 수혈 강의 히스토리 페이지</title>
<!--    아이콘을 위한 링크 -->
    <link href="{% static 'css/main.css' %}" rel="stylesheet">
    <script src="https://kit.fontawesome.com/acbb32aeb8.js" crossorigin="anonymous"></script>
<!--    한글 폰트-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

</head>
<body class="is-preload">
<!-- Wrapper -->
    <div id="wrapper">
        <!-- Main -->
        <div id="main">
            <div class="inner">
                <!-- Header -->
                <header id="header">
                                        <a href="http://127.0.0.1:8000/caffeine/result/" class="logo"><strong>History Page</strong> by Caffeine Intoxication</a>
                    <ul class="icons">
                        <li class="nav-item">
                        {% if user.is_authenticated %}
                        <a class="nav-link" href="{% url 'logout' %}">{{ user.username }} (로그아웃)</a>
                        {% else %}
                        <a class="nav-link" href="{% url 'login' %}">로그인</a>
                        {% endif %}
                        </li>
                        <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
                        <li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
                        <li><a href="#" class="icon brands fa-snapchat-ghost"><span class="label">Snapchat</span></a></li>
                        <li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                    </ul>
                </header>
<!--                content -->
                <section>
                    <div class="container-fluid py-5">
                        <span id="video">
                            <h2> Lecture Name : {{ history_lecture.lecture_name }}  </h2>
                            <iframe width="100%" height="500" src={{ history_lecture.embed_url }} title = "YouTube video player"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                        </span>
                    </div>
                    <div class="box">
                    <div class="box">
                        <div class="h-100 p-5 text-white bg-dark rounded-3">
                            <h2>강의 전문</h2>

                            <div id="textall" style="margin-left: 0px;">
                                {{ history_lecture.lecture_note }}
                            </div>
                        </div>
                    </div>

                    <div class="box">
                        <div class="h-100 p-5 text-white bg-dark rounded-3">
                            <h2>강의 요약</h2>
                            <div id="sumall" style="margin-left: 0px;">
                                {{ history_lecture.lecture_sum }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="box">
                        <div class="h-100 p-5 text-white bg-dark rounded-3">
                            <h2>키워드 추출</h2>
                            <div id="loading3" style="margin-left: 0px; display: none;">
                                <h4>키워드 추출중...</h4>
                            </div>
                            <div id="keyword" style="margin-left: 0px; display: none;">
                            </div>
                            <button id="button3" class="button" onclick="keytext()" type="button">3.
                                키워드 추출
                            </button>
                        </div>
                    </div>

                    <div class="box">
                        <div class="h-100 p-5 text-white bg-dark rounded-3">
                            <h2>빈칸 문제</h2>
                            <div id="loading4" style="margin-left: 0px; display: none;">
                                <h4>문제 생성중...</h4>
                            </div>
                            <div id="exercise" style="margin-left: 0px; display: none;">
                            </div>
                            <button id="button4" class="btn btn-outline-secondary" onclick="showanswer()"
                                    type="button" style="display: none;">4. 정답확인
                            </button>
                            <div id="answer" style="margin-left: 0px; display: none;"></div>
                        </div>
                    </div>
                </div>
<!--            section content end-->
                </section>
        <!-- inner end -->
        </div>
    <!--main end-->
    </div>
<!--        side bar start-->
<div id="sidebar">
    <div class="inner">

        <!-- Search -->
            <section id="search" class="alt">
                <form method="post" action="#">
                    <input type="text" name="query" id="query" placeholder="Search" />
                </form>
            </section>

        <!-- Menu -->
            <nav id="menu">
                <header class="major">
                    <h2>Menu</h2>
                </header>
                <ul>
                    <li><a href="http://127.0.0.1:8000/caffeine/">NEW SUMMARIZE</a></li>
                    <li><a href="http://127.0.0.1:8000/caffeine/board/">HISTORY</a></li>
                    <li><a href="#">??</a></li>

                </ul>
            </nav>

        <!-- Section -->
            <section>
                <header class="major">
                    <h2>Get in touch</h2>
                </header>
                <p>영어로 강의 문제 없어요!!!</p>
                <ul class="contact">
                    <li class="icon solid fa-envelope"><a href="#">information@caffeine.ac.kr</a></li>
                    <li class="icon solid fa-phone">(010) 1234-5678</li>
                    <li class="icon solid fa-home">30, Pildong-ro 1-gil, Jung-gu, Seoul, Republic of Korea<br />
                    02-2260-0000</li>
                </ul>
            </section>

        <!-- Footer -->
            <footer id="footer">
                <p class="copyright">&copy; Caffeine. All rights reserved.
                </br>Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
            </footer>
<!--inner end-->
    </div>
<!--    sidebar end-->
</div>
<!--wrapper end-->
</div>

</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function keytext() {
        $('#loading3').show();
        $('#loading4').show();
        $.ajax({
            url: 'http://127.0.0.1:8000/caffeine/keytext/',
            method: 'POST',
            data : {'text': $('#textall').html() }
        }).then(function (response) {
            $('#loading3').hide();
            $('#loading4').hide();
            $('#keyword').show();
            $('#keyword').html(response.keyword);
            $('#exercise').html(response.sentence_blank);
            $('#exercise').show();
            $('#answer').html(response.sentence);
            $('#answer').append(response.answer);
            $('#button3').hide();
            $('#button4').show();
        });
    }
</script>

<script>
    function savedb() {
        $.ajax({
            url: 'http://127.0.0.1:8000/caffeine/savedb/',
            method: 'POST',
        }).then(function (response) {
            $('#button_save').hide();
            alert(response)
        });
    }
</script>

<script>
    function showanswer() {
        $('#answer').show();
        $('#button4').hide();
    }
</script>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/browser.min.js' %}"></script>
    <script src="{% static 'js/breakpoints.min.js' %}"></script>
    <script src="{% static 'js/util.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>

</html>
